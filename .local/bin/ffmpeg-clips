#!/bin/sh

dir=$(pwd)

for file in "$dir"/*.mp4; do
  file_name=$(basename "$file")
  new_file=${file_name//[^a-zA-Z0-9-.]/_}
  mv "$file" "$dir/$new_file"
done

for file in "$dir"/*.mp4; do
  echo "file '$file'" >> "list.txt"
done

ffmpeg -f concat -i "list.txt" -c copy "$dir.mp4"
rm "list.txt"
